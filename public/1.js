(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{284:function(e,t,n){var r=n(294);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,i);r.locals&&(e.exports=r.locals)},293:function(e,t,n){"use strict";n(284)},294:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,"[data-v-6c1f64b7] .youtube iframe {\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  left: 0;\n  top: 0;\n}",""])},296:function(e,t,n){"use strict";var r=n(1),i=n.n(r),a=n(306),o=n(10);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}i.a.use(a.a);var u={name:"MediaContent",props:{height:{type:String,required:!0}},data:function(){return{imgNotExist:[],videoPlaying:!1}},computed:c({},Object(o.c)("map",["selectedEvent","indexSelectedEvent"])),methods:c({},Object(o.d)("map",["REMOVE_EVENT_MEDIA_URL"]))},p=(n(293),n(11)),d=n(12),v=n.n(d),f=n(53),m=n(390),E=n(391),b=n(66),h=n(70),y=n(270),g=n(23),_=Object(p.a)(u,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-carousel",{attrs:{cycle:!e.videoPlaying,height:e.height,"hide-delimiter-background":"","hide-delimiters":""}},[0!==e.selectedEvent.mediaUrl.length?e._l(e.selectedEvent.mediaUrl,(function(t,r){return n("v-carousel-item",{key:r},["constructor"===e.$route.name?n("v-btn",{staticClass:"v-btn--active",staticStyle:{right:"18px",top:"16px"},attrs:{fab:"","x-small":"",depressed:"",absolute:"",color:"grey"},on:{click:function(t){return e.REMOVE_EVENT_MEDIA_URL({indexEvent:e.indexSelectedEvent,indexMediaUrl:r})}}},[n("v-icon",{attrs:{dark:""}},[e._v("clear")])],1):e._e(),e._v(" "),e.imgNotExist.includes(t)?[n("youtube",{staticClass:"youtube",attrs:{"video-id":e.$youtube.getIdFromURL(t)},on:{playing:function(t){e.videoPlaying=!0},paused:function(t){e.videoPlaying=!1},ended:function(t){e.videoPlaying=!1}}})]:[n("v-img",{attrs:{height:"100%",contain:"",src:t},on:{error:function(n){return e.imgNotExist.push(t)}}})]],2)})):n("v-carousel-item",[n("v-sheet",{attrs:{color:"primary",height:"100%"}},[n("v-row",{staticClass:"fill-height",attrs:{align:"center",justify:"center"}},[n("div",{staticClass:"display-1"},[e._v("Контент")])])],1)],1)],2)}),[],!1,null,"6c1f64b7",null);t.a=_.exports;v()(_,{VBtn:f.a,VCarousel:m.a,VCarouselItem:E.a,VIcon:b.a,VImg:h.a,VRow:y.a,VSheet:g.a})},310:function(e,t,n){var r=n(374);"string"==typeof r&&(r=[[e.i,r,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(6)(r,i);r.locals&&(e.exports=r.locals)},373:function(e,t,n){"use strict";n(310)},374:function(e,t,n){(e.exports=n(5)(!1)).push([e.i,".map[data-v-5e1a87aa] {\n  width: 100%;\n  margin: auto;\n  border: 1px solid #4d565661;\n}",""])},403:function(e,t,n){"use strict";n.r(t);var r=n(29),i=n.n(r),a=n(32),o=n(10),s=n(392),c=n(393),l=n(394),u=n(395),p=n(396),d=n(397),v=n(399);n(308);function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){E(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b={name:"Map",components:{LMap:s.a,LTileLayer:c.a,LMarker:l.a,LTooltip:u.a,LIcon:p.a,LPolyline:d.a,LImageOverlay:v.a},data:function(){return{maxBoundsViscosity:.9,polylineOpacity:.6,polylineDashArray:"6"}},watch:{"config.selectedEventId":function(){this.$refs.map.mapObject.flyTo(this.selectedEvent.marker.position)}},computed:m(m(m({},Object(o.e)("map",["tile","config","events","tileCenter"])),Object(o.c)("map",["selectedEvent","indexSelectedEvent","arrayMarker"])),{},{sync_center:{get:function(){return this.tileCenter},set:function(e){this.SET_TILE_CENTER(e)}},noIframe:function(){return window===window.parent}}),methods:m(m(m({},Object(o.b)("map",["saveEmptyExampleMap"])),Object(o.d)("map",["SET_TILE_CENTER","SET_SELECTED_EVENT_ID","SET_EVENT_MARKER_POSITION","SET_TILE_BOUNDS","SET_MIN_TILE_ZOOM","SET_MAX_TILE_ZOOM"])),{},{prevEvent:function(){0===this.indexSelectedEvent?this.SET_SELECTED_EVENT_ID(this.events[this.events.length-1].id):0!==this.indexSelectedEvent&&this.SET_SELECTED_EVENT_ID(this.events[this.indexSelectedEvent-1].id)},nextEvent:function(){this.indexSelectedEvent===this.events.length-1?this.SET_SELECTED_EVENT_ID(this.events[0].id):this.indexSelectedEvent!==this.events.length-1&&this.SET_SELECTED_EVENT_ID(this.events[this.indexSelectedEvent+1].id)},keyDownEvent:function(e){37===e.keyCode?this.prevEvent():39===e.keyCode&&this.nextEvent()}}),beforeMount:function(){var e=this;window.addEventListener("keydown",(function(t){return e.keyDownEvent(t)}))},beforeDestroy:function(){var e=this;window.removeEventListener("keydown",(function(t){return e.keyDownEvent(t)}))}},h=(n(373),n(11)),y=n(12),g=n.n(y),_=n(53),x=n(66),O=n(324),w=Object(h.a)(b,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("l-map",{ref:"map",staticClass:"map",attrs:{minZoom:e.tile.minZoom,maxZoom:e.tile.maxZoom,center:e.sync_center,maxBoundsViscosity:e.maxBoundsViscosity,options:{zoomControl:!1}},on:{"update:center":function(t){e.sync_center=t}}},[-1===e.tile.url.indexOf("{z}")||-1===e.tile.url.indexOf("{x}")||-1===e.tile.url.indexOf("{y}")?n("l-image-overlay",{attrs:{url:e.tile.url}}):n("l-tile-layer",{attrs:{url:e.tile.url,noWrap:"",attribution:e.tile.attribution}}),e._v(" "),e._l(e.events,(function(t,r){return n("l-marker",{key:t.id,attrs:{"lat-lng":t.marker.position},on:{click:function(n){return e.SET_SELECTED_EVENT_ID(t.id)}}},[n("l-tooltip",[e._v("\n            "+e._s(t.title)+"\n        ")]),e._v(" "),e.indexSelectedEvent!==r?n("l-icon",{attrs:{"icon-size":t.marker.size,"icon-url":e.events[r].marker.url}}):n("l-icon",{attrs:{"icon-size":[2*t.marker.size[0],2*t.marker.size[1]],"icon-url":e.events[r].marker.url}})],1)})),e._v(" "),e.tile.showPolyline?[n("l-polyline",{attrs:{"lat-lngs":e.arrayMarker,opacity:e.polylineOpacity,dashArray:e.polylineDashArray,weight:void 0!==e.tile.polylineWeight?e.tile.polylineWeight:2}})]:e._e(),e._v(" "),n("v-btn",{staticClass:"v-btn--active",staticStyle:{bottom:"50%",left:"16px","z-index":"401"},attrs:{fab:"",dark:"",text:"","x-large":"",absolute:"",color:"primary"},on:{dblclick:function(e){e.stopPropagation()},click:e.prevEvent}},[n("v-icon",{attrs:{"x-large":""}},[e._v("keyboard_arrow_left")])],1),e._v(" "),n("v-btn",{staticClass:"v-btn--active",staticStyle:{bottom:"50%",right:"16px","z-index":"401"},attrs:{fab:"",dark:"",absolute:"","x-large":"",text:"",color:"primary"},on:{dblclick:function(e){e.stopPropagation()},click:e.nextEvent}},[n("v-icon",{attrs:{"x-large":""}},[e._v("keyboard_arrow_right")])],1),e._v(" "),n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var r=t.on;return[e.noIframe?n("v-btn",e._g({staticClass:"v-btn--active",staticStyle:{top:"16px",left:"16px","z-index":"401"},attrs:{absolute:"",text:"",rounded:"","x-large":""},on:{click:function(t){return t.stopPropagation(),e.$router.back()}}},r),[n("v-icon",{attrs:{large:""}},[e._v("first_page")])],1):e._e()]}}])},[e._v(" "),n("span",[e._v("Назад")])])],2)}),[],!1,null,"5e1a87aa",null),S=w.exports;function j(e,t,n,r,i,a,o){try{var s=e[a](o),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,i)}function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function T(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){P(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}g()(w,{VBtn:_.a,VIcon:x.a,VTooltip:O.a});var D={name:"Viewer",components:{Map:S,MediaContent:n(296).a},computed:T({},Object(o.c)("map",["selectedEvent","wasChanges"])),methods:T(T({},Object(o.d)("map",["SET_SELECTED_EVENT_ID","SET_TILE_CENTER"])),{},{preventNav:function(e){this.wasChanges&&(e.preventDefault(),e.returnValue="")}}),beforeRouteEnter:function(e,t,n){return(r=i.a.mark((function r(){return i.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if("example"!==e.name){r.next=5;break}return r.next=3,a.a.dispatch("map/setExampleMap",e.params.id,{root:!0});case 3:r.next=18;break;case 5:if(!e.params.id){r.next=13;break}if("constructor"===t.name||e.params.id===t.params.id){r.next=9;break}return r.next=9,a.a.dispatch("map/getMap",e.params.id,{root:!0});case 9:document.title=a.a.state.map.name+" - MapDesigner",document.description=a.a.state.map.description,r.next=18;break;case 13:if("test"===a.a.state.map.id){r.next=16;break}return r.next=16,a.a.dispatch("map/setEmptyExampleMap",null,{root:!0});case 16:document.title="Пробное использование конструктора карт и атласов - MapDesigner",document.description="Попробуйте возможности для онлайн создания карт и электронных атласов в конструкторе MapDesigner бесплатно.";case 18:n((function(t){"example"!==e.name&&e.params.id&&window.addEventListener("beforeunload",t.preventNav)}));case 19:case"end":return r.stop()}}),r)})),function(){var e=this,t=arguments;return new Promise((function(n,i){var a=r.apply(e,t);function o(e){j(a,n,i,o,s,"next",e)}function s(e){j(a,n,i,o,s,"throw",e)}o(void 0)}))})();var r},beforeRouteLeave:function(e,t,n){"example"!==t.name&&this.wasChanges&&t.params.id&&"constructor"!==e.name&&!window.confirm("Изменения атласа не будут сохранены. Продолжить?")?n(!1):(window.removeEventListener("beforeunload",this.preventNav),n())}},C=Object(h.a)(D,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticStyle:{position:"relative",overflow:"hidden",width:"100%",height:"100vh"}},[n("Map",{staticStyle:{position:"absolute","z-index":"0"}}),e._v(" "),n("div",{staticClass:"d-flex flex-column justify-center",staticStyle:{position:"absolute",right:"100px",height:"100vh",width:"34vw","z-index":"1","pointer-events":"none"}},[n("div",{staticClass:"pa-4 d-flex flex-column text-center",staticStyle:{"max-height":"90vh","background-color":"rgba(225, 225, 225, 0.7)","pointer-events":"all",overflow:"hidden"}},[n("MediaContent",{staticStyle:{"flex-shrink":"0"},attrs:{height:"38vh"}}),e._v(" "),n("div",{staticClass:"display-1 mx-6 mt-6"},[e._v(e._s(e.selectedEvent.title))]),e._v(" "),n("div",{staticClass:"mx-6 mt-4",staticStyle:{"overflow-y":"auto"},domProps:{innerHTML:e._s(e.selectedEvent.description)}})],1)])],1)}),[],!1,null,null,null);t.default=C.exports}}]);